# Introduction
This repository contains information on producing tidy data for course project for coursera course "Getting And Cleaning Data".
# Input/Raw Data
Raw data are generated by tracking the various activities of 21 training and 9 test subjects (total 30 subjects). The output signals from accelerometer and gyroscope for varous activities of 30 subjects are collected. 
Original data and the details can be found at [human Activity Recognition Using Smartphones](http://archive.ics.uci.edu/ml/datasets/Human+Activity+Recognition+Using+Smartphones)
# Output
The 561 data points for each subject and for each activity are analysed and following output is produced in [Answers.txt](https://github.com/rsamban/RameshS_coursera_GettingAndCleaningData/blob/master/Answer.txt) file.
  * Mean value of X, Y and Z coordinates from accelerometer
  * Standard Deviation value of X, Y and Z coordinates from accelerometer
## Code Book to understand the result
	The details of the calculated values in each column are described in [Code Book](https://github.com/rsamban/RameshS_coursera_GettingAndCleaningData/blob/master/CookBook.md)
# Code
## run_analyis.R
The code in this file produces mean and standard deviation for each measured feature for each subject and for each activity.
This code depends that Samsung data is the working directory in the following hierarchy

  * UCI HAR Dataset/features.txt
  * UCI HAR Dataset/activity_labels.txt
  * UCI HAR Dataset/test/X_test.txt
  * UCI HAR Dataset/test/subject_test.txt
  * UCI HAR Dataset/test/y_test.txt
  * UCI HAR Dataset/train/X_train.txt
  * UCI HAR Dataset/train/subject_train.txt
  * UCI HAR Dataset/train/y_train.txt

## How to use the code
run_analysis.R file must be sourced to call single function runAnalysis() to produce the result.

1. source(run_analysis.R)
2. runAnalysis() - save the result "Answers.txt" file in current working directory.
3. result <- runAnalysis();View(result) - save the result "Answers.txt" file in current working directory and view the result in R Data Viewer

## Source code [run_analysis.R](https://github.com/rsamban/RameshS_coursera_GettingAndCleaningData/blob/master/run_analysis.R)

```
library(data.table)
library(dplyr)
runAnalysis <- function() {
    # 1. load features names and rename the columns
    ft <- read.csv("./UCI HAR Dataset/features.txt", sep="", header=FALSE)
    names(ft) <- c("seqNo", "featureName")
    
    # load activity labels and rename columns
    al <- read.csv("./UCI HAR Dataset/activity_labels.txt", sep="", header=FALSE)
    names(al) <- c("activityTypeCode", "activityType")
    
    # Load measured feature values for "test" subjects 
    x_tst <- read.csv("./UCI HAR Dataset/test/X_test.txt", sep="", header=FALSE)
    y_tst <- read.csv("./UCI HAR Dataset/test/y_test.txt", sep="", header=FALSE)
    s_tst <- read.csv("./UCI HAR Dataset/test/subject_test.txt", sep="", header=FALSE)
    
    # Load measured features values for "train" subjects
    x_trn <- read.csv("./UCI HAR Dataset/train/X_train.txt", sep="", header=FALSE)
    y_trn <- read.csv("./UCI HAR Dataset/train/y_train.txt", sep="", header=FALSE)
    s_trn <- read.csv("./UCI HAR Dataset/train/subject_train.txt", sep="", header=FALSE)
    
    # Add subject, subjectType and activity type to measured features (for both test and train measurements)
    tst <- cbind(s_tst,subjectType="Test",y_tst,x_tst)
    trn <- cbind(s_trn,subjectType="Train",y_trn,x_trn)
    
    #combine test and training data
    combinedDataSet <- rbind(tst, trn)
    
    # rename column names for combined data set.
    combinedDataSetColumnNames <- c("subject", "subjectType", "activityType", as.character(ft$featureName) )
    names(combinedDataSet) <- combinedDataSetColumnNames
    
    # get the column names and indices of "mean" and "standar deviation" measurement
    meanAndStdDeviationIndices <- c(1, 2, 3, grep("mean", combinedDataSetColumnNames), grep("std", combinedDataSetColumnNames) )
    meanAndStdDeviationNames <- combinedDataSetColumnNames[meanAndStdDeviationIndices]
    
    # get the filtered data set (filter by column) that has 
    # only mean and standard deviations of feature measurements
    meanAndStd <- combinedDataSet[,meanAndStdDeviationIndices]
    
    # change the activity type code to activity label (mapping is defined in activity_labels.txt file)
    meanAndStd$activityType <- al$activityType[match(meanAndStd$activityType,al$activityTypeCode)]
    
    # use group_by (group by subjectType, subject, activityType in that order) to create group by clause
    groupByClause <- meanAndStd %>% group_by(subjectType, subject, activityType)
    
    # use summarise_each function to find average value of mean and standard deviation 
    # measurement for each subject and activity type
    avgMeanAndStd <- groupByClause %>% summarise_each(funs(mean))
    write.table(avgMeanAndStd, file="Answer.txt", row.names=FALSE)
    avgMeanAndStd
}
```





 

